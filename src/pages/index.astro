---
// src/pages/index.astro

// 1. Importe o 'type CollectionEntry' de 'astro:content'
import { getCollection, type CollectionEntry } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import PostCard from '../components/PostCard.astro'; // Usando nosso componente otimizado

const allPosts = await getCollection('blog');
const featuredPosts = allPosts
    .filter(post => post.data.featured)
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout
    title="ELOnARTE | O elegante elo na arte"
    description="Explore um universo onde arte, terapias integrativas e tecnologias inovadoras se encontram."
>
    <div class="container">
        <section id="blog-highlight" class="featured-section">
            <div class="section-header">
                <h1>O elegante elo na arte</h1>
                <p class="subtitle">Nossas reflexões sobre arte, tecnologia e consciência. Comece por aqui.</p>
            </div>
            
            <div class="blog-cards-grid">
                {/* 2. AQUI ESTÁ A CORREÇÃO:
                  - Adicionamos o tipo (post: CollectionEntry<'blog'>)
                  - Adicionamos o 'index' para a lógica da imagem LCP
                */}
                {featuredPosts.map((post: CollectionEntry<'blog'>, index) => (
                    <PostCard post={post} isLCP={index === 0} />
                ))}
            </div>

            <div class="cta-container">
                <a href="/blog" class="btn">Ver Todas as Publicações</a>
            </div>
        </section>
    </div>
</Layout>

<style>
    /* Seus estilos continuam os mesmos */
    .featured-section {
        padding: 4rem 1.5rem;
    }
    .section-header {
        text-align: center;
        margin-bottom: 3.5rem;
    }
    .section-header h1 {
        font-size: 2.5rem;
        font-weight: 400;
        margin-bottom: 1rem;
    }
    .subtitle {
        font-size: 1.125rem;
        color: var(--color-text-secondary);
        max-width: 60ch;
        margin: 0 auto;
    }
    .blog-cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
    }
    .cta-container {
        text-align: center;
    }
    .btn {
      display: inline-block;
      padding: 0.75rem 2rem;
      border-radius: 8px;
      font-weight: 700;
      text-decoration: none;
      background-color: var(--color-bg-light);
      color: var(--color-text-primary);
      transition: all 0.3s ease;
    }
    .btn:hover {
        background-color: var(--accent-turquoise);
        color: var(--color-bg);
        transform: translateY(-3px);
    }
</style>