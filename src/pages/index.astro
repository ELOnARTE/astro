---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import ServiceSection from '../components/ServiceSection.astro';
import Card from '../components/Card.astro';
import ContactForm from '../components/ContactForm.astro';
import BlogHighlight from '../components/BlogHighlight.astro';

// 1. Busca todos os posts do blog
const allPosts = await Astro.glob('../content/blog/*.md');

// 2. CORREÇÃO: Ordena os posts usando 'frontmatter' em vez de 'data'
const sortedPosts = allPosts.sort((a, b) => 
    new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);

// 3. Pega apenas os 3 posts mais recentes
const recentPosts = sortedPosts.slice(0, 3);
---

<Layout 
    title="ELOnARTE - Conectando Arte, Terapia & Tecnologia" 
    description="Conectando arte, terapia e tecnologia para realizar, inspirar, incluir...">
    
    <div class="container">
        <Hero />

        <ServiceSection
            id="artes-digitais"
            title="Artes Digitais"
            subtitle="Criamos, publicamos e construímos sua presença online."
            accentColor="var(--accent-turquoise)">
            <Card title="Produção Multimídia" description="Damos vida às suas ideias com vídeos, animações e design gráfico que capturam a imaginação." />
            <Card title="Publicações Digitais" description="Lançamos seus e-books, músicas e podcasts nas principais plataformas com design profissional." />
            <Card title="Desenvolvimento Web" description="Construímos portais e aplicativos que não são apenas funcionais, mas obras de arte digitais." />
        </ServiceSection>
        
        {recentPosts.length > 0 && <BlogHighlight posts={recentPosts} />}

        <ServiceSection
            id="arteterapia"
            title="Arteterapia e Terapias Integrativas"
            subtitle="Navegue pelo seu universo interior e encontre equilíbrio e bem-estar."
            accentColor="var(--accent-lilac)">
            <Card title="Sessões de Arteterapia" description="Utilize a expressão criativa como ferramenta de autoconhecimento e cura de padrões mentais e emocionais." />
            <Card title="Terapias Holísticas" description="Combinamos práticas integrativas e complementares para um bem-estar completo." />
        </ServiceSection>
        
        <ServiceSection
            id="ensino"
            title="Arte e Educação"
            subtitle="Aprenda conosco de uma forma leve, artística e inovadora."
            accentColor="var(--accent-lightpink)">
            <Card title="Ferramentas Criativas" description="Aulas práticas de design, desenvolvimento web, produção multimídia e mais." />
            <Card title="Inteligência Artificial" description="Desvende os mistérios da IA para otimizar seu trabalho e estudos." />
            <Card title="Idiomas e Programação" description="Aulas de Inglês, Português e Programação com uma metodologia divertida e eficaz." />
            <Card title="Expressões do Eu Profundo" description="Estudo aprofundado do ateliê da Consciência através das artes inspiradas." />
        </ServiceSection>

        <ContactForm />
    </div>
</Layout>
