---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import ServiceSection from '../components/ServiceSection.astro';
import Card from '../components/Card.astro';
import ContactForm from '../components/ContactForm.astro';
import BlogHighlight from '../components/BlogHighlight.astro';

// Busca os posts mais recentes para a seção de destaques
const allPosts = await Astro.glob('../content/blog/*.md');
const sortedPosts = allPosts.sort(
    (a: { frontmatter: { pubDate: string } }, b: { frontmatter: { pubDate: string } }) =>
        new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);
const recentPosts = sortedPosts.slice(0, 3);
---

<Layout
    title="ELOnARTE | Conectando Arte, Terapia & Tecnologia"
    description="Explore um universo onde arte, terapias integrativas e tecnologias inovadoras se encontram. Oferecemos desenvolvimento web, arteterapia, publicações digitais e cursos."
    image="/default-social-image.png"
>

    <div class="container">
        <Hero />

        <!-- Seção Artes Digitais -->
        <ServiceSection
            id="artes-digitais"
            title="Artes Digitais"
            subtitle="Criamos, publicamos e construímos sua presença online."
            accentColor="var(--accent-turquoise)">
            <!-- Os cards são colocados DENTRO do componente ServiceSection -->
            <Card title="Produção Multimídia" description="Deixamos suas ideias fluírem em cores, movimentos e sons. Nossas produções artísticas são o espaço por onde a criatividade voa livre." />
            <Card title="Publicações Digitais" description="Lançamos seus e-books, músicas e podcasts nas principais plataformas com design profissional." />
            <Card title="Desenvolvimento Web" description="Construímos portais e aplicativos que não são apenas funcionais, mas obras de arte digitais." />
        </ServiceSection>
        
        <!-- Seção Arteterapia -->
        <ServiceSection
            id="arteterapia"
            title="Arteterapia e Terapias Integrativas"
            subtitle="Navegue pelo seu universo interior e encontre equilíbrio e bem-estar."
            accentColor="var(--accent-lilac)">
            <Card title="Sessões de Arteterapia" description="Utilize a expressão criativa como ferramenta de autoconhecimento e cura de padrões mentais e emocionais." />
            <Card title="Terapias Holísticas" description="Combinamos práticas integrativas e complementares para um bem-estar completo." />
        </ServiceSection>
        
        <!-- Seção Ensino -->
        <ServiceSection
            id="ensino"
            title="Arte e Educação"
            subtitle="Aprenda conosco de uma forma leve, artística e inovadora."
            accentColor="var(--accent-lightpink)">
            <Card title="Ferramentas Criativas" description="Aulas práticas de design, desenvolvimento web, produção multimídia e mais." />
            <Card title="Inteligência Artificial" description="Desvende os mistérios da IA para otimizar seu trabalho e estudos." />
            <Card title="Idiomas e Programação" description="Aulas de Inglês, Português e Programação com uma metodologia divertida e eficaz." />
            <Card title="Expressões do Eu Profundo" description="Estudo aprofundado do ateliê da Consciência através das artes inspiradas." />
        </ServiceSection>

        <!-- ORDEM CORRIGIDA: Seção do Blog movida para antes do Contato -->
        {recentPosts.length > 0 && <BlogHighlight posts={recentPosts} />}

        <!-- Seção de Contato -->
        <ContactForm />
    </div>
</Layout>
